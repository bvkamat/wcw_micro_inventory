var Mongoose = require('mongoose'), Schema = Mongoose.Schema;
var dotty = require('dotty');

module.exports = MongooseModelInstance;

function MongooseModelInstance(instance,model) {
	if(model===undefined){
		this.instance = instance;
	}
	else{
		this.instance = model.build(instance);
	}
}

MongooseModelInstance.prototype.get = function(key){
	return this.instance.get(key);
}

MongooseModelInstance.prototype.set = function(key,value){
	this.instance.set(key,value);
}

MongooseModelInstance.prototype.save = function(cb){
	this.instance.save().then(				
			function(result){
				cb(null,'');
			},function(err){
				console.log('Error: ' + err);
			});	
}

MongooseModelInstance.prototype.destroy = function(cb){
	this.instance.destroy().then(				
			function(result){
				cb(null,'');
			},function(err){
				console.log('Error: ' + err);
			});	
}

MongooseModelInstance.prototype.getValues = function(cb){
	return this.instance.values;
}


